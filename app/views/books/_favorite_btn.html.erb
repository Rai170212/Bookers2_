<%# 呼び出し元から 'book' オブジェクトを local 変数として受け取る想定 %>

<% if current_user.present? %>
  
  <%# book はパーシャルに渡された変数 %>
  <% if book.favorited_by?(current_user) %>
    <%# いいね済みの場合：塗りつぶしハート (fa-solid) と削除アクション %>
    <%= link_to book_favorite_path(book), method: :delete do %>
      <i class="fa-solid fa-heart" style="color: red;"></i>
      <%= book.favorites.count %>
    <% end %>
  <% else %>
    <%# いいね未済の場合：中抜きハート (fa-regular) と作成アクション %>
    <%= link_to book_favorite_path(book), method: :post do %>
      <i class="fa-regular fa-heart"></i>
      <%= book.favorites.count %>
    <% end %>
  <% end %>

<% else %>
  <%# ログインしていない場合: いいね数を表示するのみ %>
  <i class="fa-regular fa-heart"></i>
  <%= book.favorites.count %>
<% end %>